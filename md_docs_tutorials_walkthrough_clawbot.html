<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Programming the Clawbot | OkapiLib A PROS library for programming VEX robots</title>
  <link rel="stylesheet" href="m-dark+documentation.compiled.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="okapi-docs.css" />
  <link rel="icon" href="logo-doxygen.jpeg" type="image/jpeg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="index.html" id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">OkapiLib <span class="m-thin">A PROS library for programming VEX robots</span></a>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="md_docs_tutorials_index.html">Tutorials</a></li>
            <li>
              <a href="md_docs_api_index.html">API</a>
              <ol>
                <li><a href="md_docs_api_chassis.html">Chassis API</a></li>
                <li><a href="md_docs_api_control.html">Control API</a></li>
                <li><a href="md_docs_api_devices.html">Devices API</a></li>
                <li><a href="md_docs_api_filters.html">Filters API</a></li>
                <li><a href="md_docs_api_units.html">Units API</a></li>
                <li><a href="md_docs_api_utility.html">Utility API</a></li>
              </ol>
            </li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="3">
            <li><a href="pages.html">Pages</a></li>
            <li><a href="annotated.html">Classes</a></li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          Programming the Clawbot
        </h1>
<h3>Objective</h3><p>This tutorial will guide you through basic programming of the VEX Clawbot.</p><h3>Intended Audience</h3><p>This tutorial is intended for developers with some programming experience, but with little to no experience with OkapiLib. If you haven&#x27;t programmed before, we recommend checking out all the &quot;Introduction and Basic C++ Features&quot; and &quot;Classes and Objects&quot; sections of <a href="https://www.studytonight.com/cpp/introduction-to-cpp.php">this tutorial series</a>.</p><h3>Goals</h3><p>At the end of this tutorial you will have:</p><ul><li>Understood the basic organization of an OkapiLib project</li><li>Programmed a basic chassis with &quot;tank&quot; control or &quot;arcade&quot; control</li><li>Programmed buttons to control the clawbot&#x27;s lift</li><li>Programmed a joystick axis to control the clawbot&#x27;s claw</li><li>Understood the standard subsystem module methodology</li><li>Programmed an encoder-based autonomous routine</li></ul><p>You can follow VEX&#x27;s tutorial for building this robot <a href="https://v5beta.vex.com/parent-wrapper.php?id=v5-with-clawbot">here</a>. For the purposes of this tutorial, we&#x27;ve plugged in our motors into the following ports:</p><table class="m-table"><thead><tr><th>Port</th><th>Description</th><th>Port</th><th>Description</th></tr></thead><tbody><tr><td>1</td><td>Left Wheels</td><td>11</td><td></td></tr><tr><td>2</td><td></td><td>12</td><td></td></tr><tr><td>3</td><td>Claw Motor</td><td>13</td><td></td></tr><tr><td>4</td><td></td><td>14</td><td></td></tr><tr><td>5</td><td>Vision Sensor</td><td>15</td><td></td></tr><tr><td>6</td><td></td><td>16</td><td></td></tr><tr><td>7</td><td></td><td>17</td><td></td></tr><tr><td>8</td><td>Arm Motor</td><td>18</td><td></td></tr><tr><td>9</td><td></td><td>19</td><td></td></tr><tr><td>10</td><td>Right Wheels</td><td>20</td><td></td></tr></tbody></table><p>Port 21: Radio</p><p>For the ADI:</p><table class="m-table"><thead><tr><th>Port</th><th>Description</th><th>Port</th><th>Description</th></tr></thead><tbody><tr><td>A</td><td>Left Bumper</td><td>E</td><td></td></tr><tr><td>B</td><td>Right Bumper</td><td>F</td><td></td></tr><tr><td>C</td><td></td><td>G</td><td></td></tr><tr><td>D</td><td></td><td>H</td><td>Arm Limit</td></tr></tbody></table><p>To create, build, and upload a new project in PROS 3, run</p><pre class="m-code"><span class="n">prosv5</span> <span class="n">conduct</span> <span class="k">new</span> <span class="o">&lt;</span><span class="n">path_to_project</span><span class="o">&gt;</span>
<span class="n">prosv5</span> <span class="n">make</span>
<span class="n">prosv5</span> <span class="n">upload</span>
<span class="n">prosv5</span> <span class="n">terminal</span></pre><p>The last 3 commands (<code>make</code>, <code>upload</code>, <code>terminal</code>) can be simplified to <code>prosv5 mut</code>.</p><h3>Tank/Arcade Control</h3><p>OkapiLib uses something called a <a href="classokapi_1_1ChassisController.html" class="m-doc">ChassisController</a> to interact with a robot&#x27;s chassis. This interface lets you use open-loop control methods to drive the robot around with a joystick, like tank and arcade control. It also provides methods to move the robot programmatically, like driving in an arc or only powering one side of the chassis. It also provides closed-loop control methods to drive a specific distance or turn a specific angle.</p><p>There are two main subclasses we can use: <a href="classokapi_1_1ChassisControllerIntegrated.html" class="m-doc">ChassisControllerIntegrated</a> and <a href="classokapi_1_1ChassisControllerPID.html" class="m-doc">ChassisControllerPID</a>. <a href="classokapi_1_1ChassisControllerIntegrated.html" class="m-doc">ChassisControllerIntegrated</a> uses the V5 motor&#x27;s built-in position and velocity control to move the robot around. <strong>This class is the easiest to use</strong>, so we will use it for this tutorial. The other class, <a href="classokapi_1_1ChassisControllerPID.html" class="m-doc">ChassisControllerPID</a>, uses three PID controllers running on the V5 brain and sends velocity or voltage commands to the motors. This class can give you more accurate chassis control, but requires tuning the PID controllers.</p><p>We will be using <a href="classokapi_1_1ChassisControllerIntegrated.html" class="m-doc">ChassisControllerIntegrated</a> for this tutorial. Let&#x27;s initialize it now with our two motors in ports <code>1</code> and <code>10</code>. The motor in port <code>10</code> is negative because it is reversed. We should also specify the gearset in the drive motors and the chassis dimensions.</p><pre class="m-code"><span class="c1">// Chassis Controller - lets us drive the robot around with open- or closed-loop control</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ChassisController</span><span class="o">&gt;</span> <span class="n">drive</span> <span class="o">=</span>
    <span class="n">ChassisControllerBuilder</span><span class="p">()</span>
        <span class="p">.</span><span class="n">withMotors</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">-10</span><span class="p">)</span>
        <span class="c1">// Green gearset, 4 in wheel diam, 11.5 in wheel track</span>
        <span class="p">.</span><span class="n">withDimensions</span><span class="p">(</span><span class="n">AbstractMotor</span><span class="o">::</span><span class="n">gearset</span><span class="o">::</span><span class="n">green</span><span class="p">,</span> <span class="p">{{</span><span class="mi">4</span><span class="n">_in</span><span class="p">,</span> <span class="mf">11.5</span><span class="n">_in</span><span class="p">},</span> <span class="n">imev5GreenTPR</span><span class="p">})</span>
        <span class="p">.</span><span class="n">build</span><span class="p">();</span></pre><p>Next, let&#x27;s setup tank or arcade control. <a href="classokapi_1_1ChassisController.html" class="m-doc">ChassisController</a> provides methods for us to use, we just need to pass in joystick values which have been scaled to be in the range <code>[-1, 1]</code>. OkapiLib&#x27;s <a href="classokapi_1_1Controller.html" class="m-doc">Controller</a> returns analog values in this range, so we don&#x27;t need to do any scaling ourselves.</p><h4>Tank drive</h4><pre class="m-code"><span class="c1">// Joystick to read analog values for tank or arcade control.</span>
<span class="c1">// Master controller by default.</span>
<span class="n">Controller</span> <span class="n">controller</span><span class="p">;</span>

<span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Tank drive with left and right sticks.</span>
    <span class="n">drive</span><span class="o">-&gt;</span><span class="n">getModel</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">tank</span><span class="p">(</span><span class="n">controller</span><span class="p">.</span><span class="n">getAnalog</span><span class="p">(</span><span class="n">ControllerAnalog</span><span class="o">::</span><span class="n">leftY</span><span class="p">),</span>
                            <span class="n">controller</span><span class="p">.</span><span class="n">getAnalog</span><span class="p">(</span><span class="n">ControllerAnalog</span><span class="o">::</span><span class="n">rightY</span><span class="p">));</span>

    <span class="c1">// Wait and give up the time we don&#39;t need to other tasks.</span>
    <span class="c1">// Additionally, joystick values, motor telemetry, etc. all updates every 10 ms.</span>
    <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="p">}</span></pre><h4>Arcade drive</h4><pre class="m-code"><span class="c1">// Joystick to read analog values for tank or arcade control.</span>
<span class="c1">// Master controller by default.</span>
<span class="n">Controller</span> <span class="n">controller</span><span class="p">;</span>

<span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Arcade drive with the left stick.</span>
    <span class="n">drive</span><span class="o">-&gt;</span><span class="n">getModel</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">arcade</span><span class="p">(</span><span class="n">controller</span><span class="p">.</span><span class="n">getAnalog</span><span class="p">(</span><span class="n">ControllerAnalog</span><span class="o">::</span><span class="n">leftY</span><span class="p">),</span>
                              <span class="n">controller</span><span class="p">.</span><span class="n">getAnalog</span><span class="p">(</span><span class="n">ControllerAnalog</span><span class="o">::</span><span class="n">leftX</span><span class="p">));</span>

    <span class="c1">// Wait and give up the time we don&#39;t need to other tasks.</span>
    <span class="c1">// Additionally, joystick values, motor telemetry, etc. all updates every 10 ms.</span>
    <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="p">}</span></pre><h3>Arm Control</h3><p>This section will focus on controlling the clawbot&#x27;s arm. There are two parts to this: first, the arm has a limit switch at the bottom of its travel range, so we should use that button to tell when we&#x27;ve hit a hard stop; second, the arm should be user-controlled with two buttons on the controller.</p><p>First, let&#x27;s focus on the limit switch at the bottom of the arm&#x27;s travel range. When the arm hits this button, the arm motor should stop trying to make the arm move down. We can accomplish this using an if-statement that checks whether the button is pressed.</p><p>We can define our button as an <a href="classokapi_1_1ADIButton.html" class="m-doc">ADIButton</a>:</p><pre class="m-code"><span class="n">ADIButton</span> <span class="nf">armLimitSwitch</span><span class="p">(</span><span class="sc">&#39;H&#39;</span><span class="p">);</span></pre><p>And the arm motor:</p><pre class="m-code"><span class="n">Motor</span> <span class="nf">armMotor</span><span class="p">(</span><span class="mi">-8</span><span class="p">);</span></pre><p>Then we can check if it&#x27;s pressed and stop powering the arm motor:</p><pre class="m-code"><span class="c1">// Don&#39;t power the arm if it is all the way down</span>
<span class="k">if</span> <span class="p">(</span><span class="n">armLimitSwitch</span><span class="p">.</span><span class="n">isPressed</span><span class="p">())</span> <span class="p">{</span>
    <span class="n">armMotor</span><span class="p">.</span><span class="n">moveVelocity</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// Normal arm control</span>
<span class="p">}</span></pre><p>Next, let&#x27;s add the logic to make the arm user-controller with two buttons on the controller. First, we need to define our two controller buttons as <a href="classokapi_1_1ControllerButton.html" class="m-doc">ControllerButton</a> instances:</p><pre class="m-code"><span class="n">ControllerButton</span> <span class="nf">armUpButton</span><span class="p">(</span><span class="n">ControllerDigital</span><span class="o">::</span><span class="n">A</span><span class="p">);</span>
<span class="n">ControllerButton</span> <span class="nf">armDownButton</span><span class="p">(</span><span class="n">ControllerDigital</span><span class="o">::</span><span class="n">B</span><span class="p">);</span></pre><p>Then we can use them along with our limit switch logic from above to control the arm:</p><pre class="m-code"><span class="c1">// Don&#39;t power the arm if it is all the way down</span>
<span class="k">if</span> <span class="p">(</span><span class="n">armLimitSwitch</span><span class="p">.</span><span class="n">isPressed</span><span class="p">())</span> <span class="p">{</span>
    <span class="n">armMotor</span><span class="p">.</span><span class="n">moveVelocity</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// Else, the arm isn&#39;t all the way down</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">armUpButton</span><span class="p">.</span><span class="n">isPressed</span><span class="p">())</span> <span class="p">{</span>
        <span class="n">armMotor</span><span class="p">.</span><span class="n">moveVoltage</span><span class="p">(</span><span class="mi">12000</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">armDownButton</span><span class="p">.</span><span class="n">isPressed</span><span class="p">())</span> <span class="p">{</span>
        <span class="n">armMotor</span><span class="p">.</span><span class="n">moveVoltage</span><span class="p">(</span><span class="mi">-12000</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">armMotor</span><span class="p">.</span><span class="n">moveVoltage</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></pre><h3>Autonomous Routine</h3><p>To illustrate the closed-loop control methods that <a href="classokapi_1_1ChassisController.html" class="m-doc">ChassisController</a> has, let&#x27;s make a simple autonomous routine to drive in a square.</p><p>Writing an autonomous routine is much easier when distances and turns can be done with physical units, but because we have already configured the gearset and chassis dimensions for our <a href="classokapi_1_1ChassisController.html" class="m-doc">ChassisController</a>, we don&#x27;t need to do any extra work to use this feature. Let&#x27;s make the robot move along the first quarter of the square pattern:</p><pre class="m-code"><span class="n">drive</span><span class="o">-&gt;</span><span class="n">moveDistance</span><span class="p">(</span><span class="mi">12</span><span class="n">_in</span><span class="p">);</span> <span class="c1">// Drive forward 12 inches</span>
<span class="n">drive</span><span class="o">-&gt;</span><span class="n">turnAngle</span><span class="p">(</span><span class="mi">90</span><span class="n">_deg</span><span class="p">);</span>   <span class="c1">// Turn in place 90 degrees</span></pre><h3>Wrap Up</h3><p>This is the final product from this tutorial.</p><h4>Tank drive</h4><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&quot;okapi/api.hpp&quot;</span><span class="cp"></span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">okapi</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">opcontrol</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Chassis Controller - lets us drive the robot around with open- or closed-loop control</span>
    <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ChassisController</span><span class="o">&gt;</span> <span class="n">drive</span> <span class="o">=</span>
        <span class="n">ChassisControllerBuilder</span><span class="p">()</span>
            <span class="p">.</span><span class="n">withMotors</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">-10</span><span class="p">)</span>
            <span class="c1">// Green gearset, 4 in wheel diam, 11.5 in wheel track</span>
            <span class="p">.</span><span class="n">withDimensions</span><span class="p">(</span><span class="n">AbstractMotor</span><span class="o">::</span><span class="n">gearset</span><span class="o">::</span><span class="n">green</span><span class="p">,</span> <span class="p">{{</span><span class="mi">4</span><span class="n">_in</span><span class="p">,</span> <span class="mf">11.5</span><span class="n">_in</span><span class="p">},</span> <span class="n">imev5GreenTPR</span><span class="p">})</span>
            <span class="p">.</span><span class="n">build</span><span class="p">();</span>

    <span class="c1">// Joystick to read analog values for tank or arcade control</span>
    <span class="c1">// Master controller by default</span>
    <span class="n">Controller</span> <span class="n">controller</span><span class="p">;</span>

    <span class="c1">// Arm related objects</span>
    <span class="n">ADIButton</span> <span class="n">armLimitSwitch</span><span class="p">(</span><span class="sc">&#39;H&#39;</span><span class="p">);</span>
    <span class="n">ControllerButton</span> <span class="n">armUpButton</span><span class="p">(</span><span class="n">ControllerDigital</span><span class="o">::</span><span class="n">A</span><span class="p">);</span>
    <span class="n">ControllerButton</span> <span class="n">armDownButton</span><span class="p">(</span><span class="n">ControllerDigital</span><span class="o">::</span><span class="n">B</span><span class="p">);</span>
    <span class="n">Motor</span> <span class="n">armMotor</span><span class="p">(</span><span class="mi">-8</span><span class="p">);</span>

    <span class="c1">// Button to run our sample autonomous routine</span>
    <span class="n">ControllerButton</span> <span class="n">runAutoButton</span><span class="p">(</span><span class="n">ControllerDigital</span><span class="o">::</span><span class="n">X</span><span class="p">);</span>

    <span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Tank drive with left and right sticks</span>
        <span class="n">drive</span><span class="o">-&gt;</span><span class="n">getModel</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">tank</span><span class="p">(</span><span class="n">controller</span><span class="p">.</span><span class="n">getAnalog</span><span class="p">(</span><span class="n">ControllerAnalog</span><span class="o">::</span><span class="n">leftY</span><span class="p">),</span>
                                <span class="n">controller</span><span class="p">.</span><span class="n">getAnalog</span><span class="p">(</span><span class="n">ControllerAnalog</span><span class="o">::</span><span class="n">rightY</span><span class="p">));</span>

        <span class="c1">// Don&#39;t power the arm if it is all the way down</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">armLimitSwitch</span><span class="p">.</span><span class="n">isPressed</span><span class="p">())</span> <span class="p">{</span>
            <span class="n">armMotor</span><span class="p">.</span><span class="n">moveVelocity</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="c1">// else, the arm isn&#39;t all the way down</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">armUpButton</span><span class="p">.</span><span class="n">isPressed</span><span class="p">())</span> <span class="p">{</span>
                <span class="n">armMotor</span><span class="p">.</span><span class="n">moveVoltage</span><span class="p">(</span><span class="mi">12000</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">armDownButton</span><span class="p">.</span><span class="n">isPressed</span><span class="p">())</span> <span class="p">{</span>
                <span class="n">armMotor</span><span class="p">.</span><span class="n">moveVoltage</span><span class="p">(</span><span class="mi">-12000</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">armMotor</span><span class="p">.</span><span class="n">moveVoltage</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">// Run the test autonomous routine if we press the button</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">runAutoButton</span><span class="p">.</span><span class="n">changedToPressed</span><span class="p">())</span> <span class="p">{</span>
            <span class="c1">// Drive the robot in a square pattern using closed-loop control</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">drive</span><span class="o">-&gt;</span><span class="n">moveDistance</span><span class="p">(</span><span class="mi">12</span><span class="n">_in</span><span class="p">);</span> <span class="c1">// Drive forward 12 inches</span>
                <span class="n">drive</span><span class="o">-&gt;</span><span class="n">turnAngle</span><span class="p">(</span><span class="mi">90</span><span class="n">_deg</span><span class="p">);</span>   <span class="c1">// Turn in place 90 degrees</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">// Wait and give up the time we don&#39;t need to other tasks.</span>
        <span class="c1">// Additionally, joystick values, motor telemetry, etc. all updates every 10 ms.</span>
        <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></pre><h4>Arcade drive</h4><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&quot;okapi/api.hpp&quot;</span><span class="cp"></span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">okapi</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">opcontrol</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Chassis Controller - lets us drive the robot around with open- or closed-loop control</span>
    <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ChassisController</span><span class="o">&gt;</span> <span class="n">drive</span> <span class="o">=</span>
        <span class="n">ChassisControllerBuilder</span><span class="p">()</span>
            <span class="p">.</span><span class="n">withMotors</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">-10</span><span class="p">)</span>
            <span class="c1">// Green gearset, 4 in wheel diam, 11.5 in wheel track</span>
            <span class="p">.</span><span class="n">withDimensions</span><span class="p">(</span><span class="n">AbstractMotor</span><span class="o">::</span><span class="n">gearset</span><span class="o">::</span><span class="n">green</span><span class="p">,</span> <span class="p">{{</span><span class="mi">4</span><span class="n">_in</span><span class="p">,</span> <span class="mf">11.5</span><span class="n">_in</span><span class="p">},</span> <span class="n">imev5GreenTPR</span><span class="p">})</span>
            <span class="p">.</span><span class="n">build</span><span class="p">();</span>

    <span class="c1">// Joystick to read analog values for tank or arcade control</span>
    <span class="c1">// Master controller by default</span>
    <span class="n">Controller</span> <span class="n">controller</span><span class="p">;</span>

    <span class="c1">// Arm related objects</span>
    <span class="n">ADIButton</span> <span class="n">armLimitSwitch</span><span class="p">(</span><span class="sc">&#39;H&#39;</span><span class="p">);</span>
    <span class="n">ControllerButton</span> <span class="n">armUpButton</span><span class="p">(</span><span class="n">ControllerDigital</span><span class="o">::</span><span class="n">A</span><span class="p">);</span>
    <span class="n">ControllerButton</span> <span class="n">armDownButton</span><span class="p">(</span><span class="n">ControllerDigital</span><span class="o">::</span><span class="n">B</span><span class="p">);</span>
    <span class="n">Motor</span> <span class="n">armMotor</span><span class="p">(</span><span class="mi">-8</span><span class="p">);</span>

    <span class="c1">// Button to run our sample autonomous routine</span>
    <span class="n">ControllerButton</span> <span class="n">runAutoButton</span><span class="p">(</span><span class="n">ControllerDigital</span><span class="o">::</span><span class="n">X</span><span class="p">);</span>

    <span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Arcade drive with the left stick</span>
        <span class="n">drive</span><span class="o">-&gt;</span><span class="n">getModel</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">arcade</span><span class="p">(</span><span class="n">controller</span><span class="p">.</span><span class="n">getAnalog</span><span class="p">(</span><span class="n">ControllerAnalog</span><span class="o">::</span><span class="n">leftY</span><span class="p">),</span>
                                  <span class="n">controller</span><span class="p">.</span><span class="n">getAnalog</span><span class="p">(</span><span class="n">ControllerAnalog</span><span class="o">::</span><span class="n">leftX</span><span class="p">));</span>

        <span class="c1">// Don&#39;t power the arm if it is all the way down</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">armLimitSwitch</span><span class="p">.</span><span class="n">isPressed</span><span class="p">())</span> <span class="p">{</span>
            <span class="n">armMotor</span><span class="p">.</span><span class="n">moveVelocity</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="c1">// else, the arm isn&#39;t all the way down</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">armUpButton</span><span class="p">.</span><span class="n">isPressed</span><span class="p">())</span> <span class="p">{</span>
                <span class="n">armMotor</span><span class="p">.</span><span class="n">moveVoltage</span><span class="p">(</span><span class="mi">12000</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">armDownButton</span><span class="p">.</span><span class="n">isPressed</span><span class="p">())</span> <span class="p">{</span>
                <span class="n">armMotor</span><span class="p">.</span><span class="n">moveVoltage</span><span class="p">(</span><span class="mi">-12000</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">armMotor</span><span class="p">.</span><span class="n">moveVoltage</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">// Run the test autonomous routine if we press the button</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">runAutoButton</span><span class="p">.</span><span class="n">changedToPressed</span><span class="p">())</span> <span class="p">{</span>
            <span class="c1">// Drive the robot in a square pattern using closed-loop control</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">drive</span><span class="o">-&gt;</span><span class="n">moveDistance</span><span class="p">(</span><span class="mi">12</span><span class="n">_in</span><span class="p">);</span> <span class="c1">// Drive forward 12 inches</span>
                <span class="n">drive</span><span class="o">-&gt;</span><span class="n">turnAngle</span><span class="p">(</span><span class="mi">90</span><span class="n">_deg</span><span class="p">);</span>   <span class="c1">// Turn in place 90 degrees</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">// Wait and give up the time we don&#39;t need to other tasks.</span>
        <span class="c1">// Additionally, joystick values, motor telemetry, etc. all updates every 10 ms.</span>
        <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></pre>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search.js"></script>
<script src="searchdata-v1.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>OkapiLib A PROS library for programming VEX robots. Created with <a href="https://doxygen.org/">Doxygen</a> 1.8.13 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
